webpackJsonp([4],{W0JJ:function(t,e){t.exports={menuBackgroundColor:"#5a5a5a",menuTextColor:"#fff",menuActiveTextColor:"#ffd04b"}},W2Q3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("3cXf"),s=i.n(o),n={name:"draggable",props:{top:{type:Number,default:null},bottom:{type:Number,default:null},left:{type:Number,default:null},right:{type:Number,default:null},center:{type:Boolean,default:!1},width:{type:Number,default:500},isDrag:{type:Boolean,default:!0},overflow:{type:Boolean,default:!1},offset:{type:Array,default:function(){return[0,0,0,0]}}},data:function(){return{option:{drapDom:null,drapHeader:null,dragHeight:null,dragWidth:null,winWidth:null,winHeight:null,mouseX:0,mouseY:0}}},mounted:function(){this.option.drapHeader=this.$slots.header[0].elm,this.option.drapHeader.style.cursor=this.isDrag?"all-scroll":"",this.initData(),window.addEventListener("resize",this.initData)},destroyed:function(){this.removeEvent(window,"resize",this.initData),this.removeEvent(this.option.drapHeader,"mousedown",this.mouseDown)},methods:{initData:function(){var t=this.$refs.draggableWrap;t&&(this.option.drapDom=t,this.option.dragHeight=t.offsetHeight||0,this.option.dragWidth=t.offsetWidth||0,this.option.winHeight=window.innerHeight||0,this.option.winWidth=window.innerWidth||0,this.initPosition())},initPosition:function(){this.$refs.draggableWrap.style.bottom="initial",this.$refs.draggableWrap.style.right="initial",this.center?(this.option.drapDom.style.top=this.option.winHeight/2-this.option.dragHeight/2+"px",this.option.drapDom.style.left=this.option.winWidth/2-this.option.dragWidth/2+"px"):(null!==this.bottom&&(this.option.drapDom.style.top=this.option.winHeight-this.option.dragHeight-this.bottom+"px"),null!==this.right&&(this.option.drapDom.style.left=this.option.winWidth-this.option.dragWidth-this.right+"px"),null!==this.top&&(this.option.drapDom.style.top=this.top+"px"),null!==this.left&&(this.option.drapDom.style.left=this.left+"px")),this.isDrag&&this.addEvent(this.option.drapHeader,"mousedown",this.mouseDown)},mouseDown:function(t){this.option.mouseX=t.offsetX,this.option.mouseY=t.offsetY,this.addEvent(document,"mousemove",this.mouseMove),this.addEvent(document,"mouseup",this.mouseUp)},mouseUp:function(t){this.removeEvent(document,"mousemove",this.mouseMove)},mouseMove:function(t){var e=t.pageY-this.option.mouseY,i=t.pageX-this.option.mouseX;if(this.overflow)this.option.drapDom.style.top=e+"px",this.option.drapDom.style.left=i+"px";else{var o=e>=this.option.winHeight-this.option.dragHeight-this.offset[2]?this.option.winHeight-this.option.dragHeight-this.offset[2]:e,s=i>=this.option.winWidth-this.option.dragWidth-this.offset[1]?this.option.winWidth-this.option.dragWidth-this.offset[1]:i;this.option.drapDom.style.top=e<=this.offset[0]?this.offset[0]:o+"px",this.option.drapDom.style.left=i<=this.offset[3]?this.offset[3]:s+"px"}},addEvent:function(t,e,i){t&&(t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,!0):t["on"+e]=i)},removeEvent:function(t,e,i){t&&(t.detachEvent?t.detachEvent("on"+e,i):t.removeEventListener?t.removeEventListener(e,i,!0):t["on"+e]=null)}}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"draggableWrap",class:"draggable-wrap "+(this.isDrag?"cursor-scroll":""),style:"width:"+this.width+"px"},[this._t("header"),this._v(" "),this._t("body")],2)},staticRenderFns:[]};var a=i("C7Lr")(n,r,!1,function(t){i("avJD")},null,null).exports,l=i("10Oc"),u={name:"Login",components:{draggableDialog:a},data:function(){return{rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],pass:[{required:!0,message:"请输入密码",trigger:"blur"}]},ruleForm:{name:"",pass:"",checked:!0}}},created:function(){this.getCookie()},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.login()})},resetForm:function(t){this.$refs[t].resetFields()},keyup:function(t){this.login()},login:function(){var t=Object(l.a)(this.ruleForm.name,this.ruleForm.pass),e=t.code,i=t.message,o=t.result;if(200===e){this.ruleForm.checked?this.setCookie(this.ruleForm.name,this.ruleForm.pass,7):this.clearCookie(),localStorage.setItem("vvmily-user-token",o.token);var n=Object(l.b)(o.token,this.ruleForm),r=n.code,a=n.message,u=n.result;200===r?(localStorage.setItem("vvmily-user-info",s()(u)),this.$router.push({path:"/index",query:{status:"1"}})):this.$message.warning(a)}else this.$message.warning(i)},setCookie:function(t,e,i){var o=new Date;o.setTime(o.getTime()+864e5*i),window.document.cookie="name="+t+";path=/;expires="+o.toGMTString(),window.document.cookie="pass="+e+";path=/;expires="+o.toGMTString()},getCookie:function(){if(document.cookie.length>0){for(var t=document.cookie.split("; "),e=0;e<t.length;e++){var i=t[e].split("=");"name"==i[0]?this.ruleForm.name=i[1]:"pass"==i[0]&&(this.ruleForm.pass=i[1])}this.ruleForm.checked=!0}else this.ruleForm.checked=!1},clearCookie:function(){this.setCookie("","",-1)}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login_login-container"},[i("draggable-dialog",{staticClass:"layout-login",attrs:{center:!0,width:400}},[i("template",{slot:"header"},[i("div",{staticClass:"login-title"},[i("span",[t._v("登 录")])])]),t._v(" "),i("template",{slot:"body"},[i("div",{staticClass:"login-form"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm _pr20 _pt10",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"用户名",prop:"name"}},[i("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyup(e)}},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),i("el-form-item",{staticClass:"_mb0",attrs:{label:"密码",prop:"pass"}},[i("el-input",{attrs:{type:"password",autocomplete:"off"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyup(e)}},model:{value:t.ruleForm.pass,callback:function(e){t.$set(t.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1),t._v(" "),i("el-form-item",{staticClass:"_mb0"},[i("el-checkbox",{model:{value:t.ruleForm.checked,callback:function(e){t.$set(t.ruleForm,"checked",e)},expression:"ruleForm.checked"}},[t._v("记住密码")])],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("登录")])],1)],1)],1)])],2)],1)},staticRenderFns:[]};var d=i("C7Lr")(u,h,!1,function(t){i("W0JJ")},null,null);e.default=d.exports},avJD:function(t,e){}});
//# sourceMappingURL=4.c2d627d2a675633cec53.js.map