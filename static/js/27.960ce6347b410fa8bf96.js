webpackJsonp([27],{x93Y:function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"markdown"},[a("p",[s._v("/"),a("em",[s._v(" eslint-disable ")]),s._v("/"),a("br"),s._v('import axios from "axios";'),a("br"),s._v('import qs from "qs";'),a("br"),s._v('import { Loading, Message } from "element-ui";')]),a("p",[s._v('import store from "../../vuex/index";'),a("br"),s._v('import { config } from "shelljs";')]),a("p",[s._v("let loadingInstance;")]),a("p",[s._v("axios.defaults.timeout = 30000;"),a("br"),s._v("axios.defaults.baseURL = '/';"),a("br"),s._v("axios.interceptors.request.use(config => {"),a("br"),s._v("  if (config.method === 'post') {")]),a("pre",[a("code",[s._v("config"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("data "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" qs"),a("span",{staticClass:"token punctuation"},[s._v(".")]),a("span",{staticClass:"token function"},[s._v("stringify")]),a("span",{staticClass:"token punctuation"},[s._v("(")]),s._v("config"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("data"),a("span",{staticClass:"token punctuation"},[s._v(")")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\nconfig"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("headers"),a("span",{staticClass:"token punctuation"},[s._v("[")]),a("span",{staticClass:"token string"},[s._v('"formdata"')]),a("span",{staticClass:"token punctuation"},[s._v("]")]),s._v(" "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v('"1"')]),a("span",{staticClass:"token punctuation"},[s._v(";")])])]),a("p",[s._v("}"),a("br"),s._v("  loadingInstance = Loading.service({")]),a("pre",[a("code",[s._v("text"),a("span",{staticClass:"token operator"},[s._v(":")]),s._v(" "),a("span",{staticClass:"token string"},[s._v('"加载中..."')]),a("span",{staticClass:"token punctuation"},[s._v(",")]),s._v("\nbackground"),a("span",{staticClass:"token operator"},[s._v(":")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'rgba(255,255,255,0.6)'")])])]),a("p",[s._v("})"),a("br"),s._v('  store.commit("changeLoading", store.getters.changeLoading + 1);'),a("br"),s._v("  return config;"),a("br"),s._v("}, err => {"),a("br"),s._v("  return Promise.reject(err);"),a("br"),s._v("});"),a("br"),s._v("axios.interceptors.response.use(response => {"),a("br"),s._v('  store.commit("changeLoading", store.getters.changeLoading - 1);'),a("br"),s._v("  if (store.getters.changeLoading === 0) {")]),a("pre",[a("code",[s._v("loadingInstance"),a("span",{staticClass:"token punctuation"},[s._v(".")]),a("span",{staticClass:"token function"},[s._v("close")]),a("span",{staticClass:"token punctuation"},[s._v("(")]),a("span",{staticClass:"token punctuation"},[s._v(")")])])]),a("p",[s._v("}"),a("br"),s._v("  return response.data;"),a("br"),s._v("}, err => {"),a("br"),s._v('  store.commit("changeLoading", store.getters.changeLoading - 1);'),a("br"),s._v("  if (store.getters.changeLoading === 0) {")]),a("pre",[a("code",[s._v("loadingInstance"),a("span",{staticClass:"token punctuation"},[s._v(".")]),a("span",{staticClass:"token function"},[s._v("close")]),a("span",{staticClass:"token punctuation"},[s._v("(")]),a("span",{staticClass:"token punctuation"},[s._v(")")])])]),a("p",[s._v("}"),a("br"),s._v("  if (err.response) {")]),a("pre",[a("code",[a("span",{staticClass:"token keyword"},[s._v("switch")]),s._v(" "),a("span",{staticClass:"token punctuation"},[s._v("(")]),s._v("err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("response"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("status"),a("span",{staticClass:"token punctuation"},[s._v(")")]),s._v(" "),a("span",{staticClass:"token punctuation"},[s._v("{")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("400")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'错误请求'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("401")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'未授权，请重新登录'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("403")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'拒绝访问'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("404")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'请求错误，未找到该资源'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("405")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'请求方法未允许'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("408")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'请求超时'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("500")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'服务端出错'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("501")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'网络未实现'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("502")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'网络错误'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("503")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'服务不可用'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("504")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'网络超时'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("case")]),s._v(" "),a("span",{staticClass:"token number"},[s._v("505")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'http版本不支持该请求'")]),s._v("\n    "),a("span",{staticClass:"token keyword"},[s._v("break")]),a("span",{staticClass:"token punctuation"},[s._v(";")]),s._v("\n  "),a("span",{staticClass:"token keyword"},[s._v("default")]),a("span",{staticClass:"token operator"},[s._v(":")]),s._v("\n    err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token template-string"},[a("span",{staticClass:"token template-punctuation string"},[s._v("`")]),a("span",{staticClass:"token string"},[s._v("连接错误")]),a("span",{staticClass:"token interpolation"},[a("span",{staticClass:"token interpolation-punctuation punctuation"},[s._v("${")]),s._v("err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("response"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("status"),a("span",{staticClass:"token interpolation-punctuation punctuation"},[s._v("}")])]),a("span",{staticClass:"token template-punctuation string"},[s._v("`")])]),s._v("\n"),a("span",{staticClass:"token punctuation"},[s._v("}")])])]),a("p",[s._v("} else {")]),a("pre",[a("code",[s._v("err"),a("span",{staticClass:"token punctuation"},[s._v(".")]),s._v("message "),a("span",{staticClass:"token operator"},[s._v("=")]),s._v(" "),a("span",{staticClass:"token string"},[s._v("'连接服务器失败'")])])]),a("p",[s._v("}"),a("br"),s._v("  return Promise.reject(err.message)"),a("br"),s._v("})"),a("br"),s._v("export default axios")])])}]},e=a("C7Lr")(null,n,!1,null,null,null);t.default=e.exports}});
//# sourceMappingURL=27.960ce6347b410fa8bf96.js.map